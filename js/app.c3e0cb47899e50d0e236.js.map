{"version":3,"sources":["webpack:///js/app.c3e0cb47899e50d0e236.js","webpack:///src/threejs/Viewer.vue","webpack:///./src/components/Header.vue?2b0e","webpack:///./src/components/ThresholdBar.vue","webpack:///src/components/ThresholdBar.vue","webpack:///./src/assets/home.svg","webpack:///src/components/CheckImage.vue","webpack:///src/components/CameraApp.vue","webpack:///./src/components/CameraApp.vue?758e","webpack:///./src/components/App.vue","webpack:///src/components/App.vue","webpack:///./src/components/App.vue?7373","webpack:///src/components/Header.vue","webpack:///./src/components/Top.vue?1a59","webpack:///./src/threejs/ThreeCtrl.js","webpack:///./src/components/CheckImage.vue?ca23","webpack:///./src/main.js","webpack:///./src/components/ThresholdBar.vue?d631","webpack:///./src/threejs/Viewer.vue","webpack:///./src/utils/getCam.js","webpack:///./src/utils/detectCanvas.js","webpack:///./src/assets/cameraIcon.svg","webpack:///./src/router/index.js","webpack:///./src/assets/camera.svg","webpack:///./src/assets/photoIcon.svg","webpack:///./src/threejs/Viewer.vue?006f","webpack:///./src/components/CheckImage.vue","webpack:///./src/components/CameraApp.vue","webpack:///./src/utils/osType.js","webpack:///./src/components/Header.vue","webpack:///./src/components/Top.vue","webpack:///src/components/Top.vue"],"names":["webpackJsonp","/rWy","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0__ThreeCtrl__","_require","props","data","threeCtrl","url","snsInit","isSafari","platform","name","methods","onSavePng","this","getPngBlob","onSaveGif","getGifBlob","saveImage","saveAs","blob","URL","createObjectURL","File","type","setTimeout","twttr","widgets","load","$refs","saveArea","closeSaveArea","play","revokeObjectURL","mounted","destroyed","destroy","1TOb","render","_vm","_h","$createElement","_c","_self","class","size","staticClass","_v","staticRenderFns","esExports","4unC","injectStyle","ssrContext","normalizeComponent","__vue_styles__","Component","5txN","seeking","handleSeekStart","handleSeek","e","onChange","Math","max","min","t","handleSeekEnd","77/w","exports","7EmJ","8nkg","__WEBPACK_IMPORTED_MODULE_0__utils_detectCanvas__","__WEBPACK_IMPORTED_MODULE_1__components_ThresholdBar__","components","ThresholdBar","ctx","watch","threshold","draw","canvas","width","imageData","height","getContext","onSelect","onDecide","getImageData","tmpImageData","set","putImageData","ACnX","AINW","CZZz","__WEBPACK_IMPORTED_MODULE_0__utils_getCam__","__WEBPACK_IMPORTED_MODULE_1__utils_detectCanvas__","__WEBPACK_IMPORTED_MODULE_2__components_CheckImage__","__WEBPACK_IMPORTED_MODULE_3__utils_osType__","__WEBPACK_IMPORTED_MODULE_4__components_ThresholdBar__","CheckImage","reqID","vw","vh","length","checking","facingMode","isPC","setVideo","video","alert","startRendering","requestAnimationFrame","bind","stopRendering","cancelAnimationFrame","drawImage","closeApp","onClose","shoot","blackFilter","style","display","changeFacing","onSet","onCancel","CwZf","maxWidth","attrs","ref","transform","on","onChangeThreshold","_e","radius","Dy5b","EWfp","EZYi","__WEBPACK_IMPORTED_MODULE_0__components_CameraApp__","__WEBPACK_IMPORTED_MODULE_1__components_Top__","__WEBPACK_IMPORTED_MODULE_2__components_Header__","__WEBPACK_IMPORTED_MODULE_3__threejs_Viewer__","__WEBPACK_IMPORTED_MODULE_4__components_CheckImage__","Top","HeaderBar","CameraApp","Viewer","mode","openCamApp","closeCamApp","inputFile","setImageData","changeThreshold","GMKS","directives","rawName","value","expression","HCTz","__WEBPACK_IMPORTED_MODULE_0__utils_osType__","HpNp","backgroundImage","onStart","onSelectFile","KkvV","formatImageData","Uint8Array","buffer","i","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default","require","THREE","OrbitControls","_class","container","renderer","scene","material","camera","cameraCtrl","initRenderer","initScene","initMaterial","initCoinRing","initCoinPattern","initLight","initCamera","resize","aspect","clientWidth","clientHeight","updateProjectionMatrix","setSize","window","addEventListener","key","WebGLRenderer","preserveDrawingBuffer","antialias","alpha","appendChild","domElement","setClearColor","Scene","loader","CubeTextureLoader","setPath","textureCube","minFilter","LinearFilter","MeshStandardMaterial","roughness","metalness","color","envMap","ringGeometry","RingBufferGeometry","RADIUS","frontRing","Mesh","position","z","THICKNESS","add","backRing","clone","rotateY","PI","outerCylinderGeometry","CylinderBufferGeometry","outerCylinder","rotateX","innerCylinderGeometry","innerCylinder","scale","x","texture","DataTexture","RGBAFormat","UnsignedByteType","needsUpdate","flipY","circleGeometry","CircleBufferGeometry","circleMaterial","bumpMap","bumpScale","front0","back0","geometry","PlaneBufferGeometry","MeshBasicMaterial","map","blending","NormalBlending","transparent","front","back","frontLight","DirectionalLight","backLight","PerspectiveCamera","controls","autoRotate","minDistance","update","removeEventListener","pause","dispose","callback","resize4Save","saveState","enabled","lookAt","target","toBlob","reset","gif","GIF","workers","quality","workerScript","index","addFrame","cos","sin","delay","duration","copy","LEfL","N+cy","NHnr","Vue","config","productionTip","el","router","template","NJKC","$event","preventDefault","apply","arguments","Om08","PGuG","detach","prevStream","getTracks","forEach","track","stop","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","webkitURL","attach","option","error","stream","undefined","srcObject","src","ROS8","y","r","g","b","SI+p","XYSa","YaEn","use","Router","routes","path","component","App","Zl/t","dYHa","g3VV","_m","jLpY","ju6C","lsO9","mriO","o7JW","osType","isIOS","test","userAgent","toLowerCase","isAndroid","teIl","vzGa","wxRh","ylou","__WEBPACK_IMPORTED_MODULE_0_blueimp_load_image__","__WEBPACK_IMPORTED_MODULE_0_blueimp_load_image___default","__WEBPACK_IMPORTED_MODULE_1__threejs_ThreeCtrl__","image","onload","fillStyle","fillRect"],"mappings":"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","file":"js/app.c3e0cb47899e50d0e236.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/rWy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ThreeCtrl__ = __webpack_require__(\"KkvV\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\nvar _require = __webpack_require__(\"lDdF\"),\n    saveAs = _require.saveAs;\n\nvar platform = __webpack_require__(\"6ltY\");\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: ['imageData', 'onClose'],\n  data: function data() {\n    return {\n      threeCtrl: null,\n      url: null,\n      snsInit: false,\n      isSafari: platform.name === 'Safari'\n    };\n  },\n\n  methods: {\n    onSavePng: function onSavePng() {\n      var _this = this;\n\n      this.threeCtrl.getPngBlob(function (blob) {\n        return _this.saveImage(blob, 'png');\n      });\n    },\n    onSaveGif: function onSaveGif() {\n      var _this2 = this;\n\n      this.threeCtrl.getGifBlob(function (blob) {\n        return _this2.saveImage(blob, 'gif');\n      });\n    },\n    saveImage: function saveImage(blob, type) {\n      var _this3 = this;\n\n      var name = 'photocoin.' + type;\n      if (!this.isSafari) saveAs(blob, name);\n\n      this.url = URL.createObjectURL(new File([blob], name, { type: 'image/' + type }));\n      setTimeout(function () {\n        return _this3.threeCtrl.pause();\n      });\n\n      if (!this.snsInit) {\n        /* global twttr */\n        twttr.widgets.load(this.$refs.saveArea);\n        this.snsInit = true;\n      }\n    },\n    closeSaveArea: function closeSaveArea() {\n      this.threeCtrl.play();\n      URL.revokeObjectURL(this.url);\n      this.url = null;\n    }\n  },\n  mounted: function mounted() {\n    this.threeCtrl = new __WEBPACK_IMPORTED_MODULE_0__ThreeCtrl__[\"a\" /* default */](this.$refs.container, this.imageData);\n  },\n  destroyed: function destroyed() {\n    this.threeCtrl.destroy();\n  }\n});\n\n/***/ }),\n\n/***/ \"1TOb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['root', _vm.size]},[_c('span',{staticClass:\"logo\"},[_vm._v(\"PhotoCoin\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"4unC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ThresholdBar_vue__ = __webpack_require__(\"5txN\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_08398c4f_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ThresholdBar_vue__ = __webpack_require__(\"NJKC\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"vzGa\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-08398c4f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ThresholdBar_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_08398c4f_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ThresholdBar_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"5txN\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: ['value', 'onChange'],\n  data: function data() {\n    return {\n      seeking: false\n    };\n  },\n\n  methods: {\n    handleSeekStart: function handleSeekStart(e) {\n      this.seeking = true;\n      this.handleSeek(e);\n    },\n    handleSeek: function handleSeek(e) {\n      if (!this.seeking) return;\n\n      var x = typeof e.clientX === 'number' ? e.clientX : e.touches[0].pageX;\n      var t = (x - e.target.getBoundingClientRect().left) / e.target.clientWidth * 256;\n      this.onChange(Math.max(0, Math.min(256, t)));\n    },\n    handleSeekEnd: function handleSeekEnd() {\n      this.seeking = false;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"77/w\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjZmZmIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSI0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0xMCAyMHYtNmg0djZoNXYtOGgzTDEyIDMgMiAxMmgzdjh6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==\"\n\n/***/ }),\n\n/***/ \"7EmJ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"8nkg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_detectCanvas__ = __webpack_require__(\"ROS8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_ThresholdBar__ = __webpack_require__(\"4unC\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: { ThresholdBar: __WEBPACK_IMPORTED_MODULE_1__components_ThresholdBar__[\"a\" /* default */] },\n  props: ['onCancel', 'onDecide', 'onChangeThreshold', 'threshold', 'imageData', 'radius'],\n  data: function data() {\n    return {\n      ctx: null\n    };\n  },\n\n  watch: {\n    threshold: function threshold() {\n      this.draw();\n    }\n  },\n  mounted: function mounted() {\n    var canvas = this.$refs.canvas;\n    canvas.width = this.imageData.width;\n    canvas.height = this.imageData.width;\n    this.ctx = canvas.getContext('2d');\n    this.draw();\n  },\n\n  methods: {\n    onSelect: function onSelect() {\n      this.onDecide(this.ctx.getImageData(0, 0, this.imageData.width, this.imageData.height));\n    },\n    draw: function draw() {\n      var tmpImageData = this.ctx.getImageData(0, 0, this.imageData.width, this.imageData.height);\n      tmpImageData.data.set(Object(__WEBPACK_IMPORTED_MODULE_0__utils_detectCanvas__[\"a\" /* default */])({\n        data: new Uint8ClampedArray(this.imageData.data),\n        width: this.imageData.width\n      }, this.threshold, 1, 1).data);\n      this.ctx.putImageData(tmpImageData, 0, 0);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"ACnX\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"AINW\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"CZZz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_getCam__ = __webpack_require__(\"PGuG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_detectCanvas__ = __webpack_require__(\"ROS8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_CheckImage__ = __webpack_require__(\"ju6C\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_osType__ = __webpack_require__(\"o7JW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_ThresholdBar__ = __webpack_require__(\"4unC\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: ['onClose', 'onSet', 'threshold', 'onChangeThreshold', 'radius'],\n  components: { CheckImage: __WEBPACK_IMPORTED_MODULE_2__components_CheckImage__[\"a\" /* default */], ThresholdBar: __WEBPACK_IMPORTED_MODULE_4__components_ThresholdBar__[\"a\" /* default */] },\n  data: function data() {\n    return {\n      reqID: null,\n      vw: null,\n      vh: null,\n      length: null,\n      ctx: null,\n      imageData: null,\n      checking: false,\n      facingMode: 'environment',\n      isPC: __WEBPACK_IMPORTED_MODULE_3__utils_osType__[\"a\" /* default */].isPC()\n    };\n  },\n  mounted: function mounted() {\n    this.setVideo();\n  },\n\n  methods: {\n    setVideo: function setVideo() {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_0__utils_getCam__[\"a\" /* default */].attach(this.$refs.video, {\n        video: { facingMode: this.facingMode }, audio: false\n      }, function () {\n        /* eslint-disable no-alert */\n        alert('Camera could not be obtained.');\n        _this.onClose();\n      });\n    },\n    startRendering: function startRendering() {\n      var video = this.$refs.video;\n      var vw = video.videoWidth;\n      var vh = video.videoHeight;\n      var length = Math.min(vw, vh);\n      this.vw = vw;\n      this.vh = vh;\n      this.length = length;\n\n      var canvas = this.$refs.canvas;\n      canvas.width = length;\n      canvas.height = length;\n\n      if (!this.ctx) this.ctx = canvas.getContext('2d');\n\n      this.reqID = requestAnimationFrame(this.render.bind(this));\n    },\n    stopRendering: function stopRendering() {\n      __WEBPACK_IMPORTED_MODULE_0__utils_getCam__[\"a\" /* default */].detach();\n      cancelAnimationFrame(this.reqID);\n    },\n    render: function render() {\n      var length = this.length;\n      var ctx = this.ctx;\n\n      ctx.drawImage(this.$refs.video, (this.vw - length) / 2, (this.vh - length) / 2, length, length, 0, 0, length, length);\n      var imageData = ctx.getImageData(0, 0, length, length);\n      ctx.putImageData(Object(__WEBPACK_IMPORTED_MODULE_1__utils_detectCanvas__[\"a\" /* default */])(imageData, this.threshold, this.radius, 0), 0, 0);\n      this.reqID = requestAnimationFrame(this.render.bind(this));\n    },\n    closeApp: function closeApp() {\n      this.stopRendering();\n      this.onClose();\n    },\n    shoot: function shoot() {\n      var _this2 = this;\n\n      this.$refs.blackFilter.style.display = 'block';\n      setTimeout(function () {\n        _this2.$refs.blackFilter.style.opacity = 0;\n      }, 100);\n      setTimeout(function () {\n        _this2.$refs.blackFilter.style.display = 'none';\n        _this2.$refs.blackFilter.style.opacity = 1;\n\n        var length = _this2.length * _this2.radius;\n        var ctx = _this2.ctx;\n\n        ctx.drawImage(_this2.$refs.video, (_this2.vw - length) / 2, (_this2.vh - length) / 2, length, length, 0, 0, length, length);\n        _this2.imageData = ctx.getImageData(0, 0, length, length);\n        _this2.stopRendering();\n        _this2.checking = true;\n      }, 500);\n    },\n    changeFacing: function changeFacing() {\n      this.facingMode = this.facingMode === 'user' ? 'environment' : 'user';\n      this.setVideo();\n    },\n    onDecide: function onDecide(imageData) {\n      this.checking = false;\n      this.onSet(imageData);\n    },\n    onCancel: function onCancel() {\n      this.checking = false;\n      this.setVideo();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"CwZf\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"root\"},[_c('div',{style:({ maxWidth: (_vm.length + \"px\") }),attrs:{\"id\":\"canvasFrame\"}},[_c('div',[_c('canvas',{ref:\"canvas\",style:({ transform: (\"rotateY(\" + (_vm.isPC || _vm.facingMode === 'user' ? 180 : 0) + \"deg)\") })})])]),_vm._v(\" \"),_c('video',{ref:\"video\",attrs:{\"playsinline\":\"\"},on:{\"canplaythrough\":_vm.startRendering}}),_vm._v(\" \"),_c('div',{staticClass:\"controls\"},[_c('ThresholdBar',{attrs:{\"value\":_vm.threshold,\"onChange\":_vm.onChangeThreshold}}),_vm._v(\" \"),_c('div',{staticClass:\"backBtn\",on:{\"click\":_vm.closeApp}},[_c('img',{attrs:{\"src\":__webpack_require__(\"77/w\")}})]),_vm._v(\" \"),(!_vm.isPC)?_c('div',{staticClass:\"facingBtn\",on:{\"click\":_vm.changeFacing}},[_c('img',{attrs:{\"src\":__webpack_require__(\"Zl/t\")}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"shutter\",on:{\"click\":_vm.shoot}})],1),_vm._v(\" \"),_c('div',{ref:\"blackFilter\",staticClass:\"blackFilter\"}),_vm._v(\" \"),(_vm.checking)?_c('CheckImage',{attrs:{\"onCancel\":_vm.onCancel,\"onChangeThreshold\":_vm.onChangeThreshold,\"onDecide\":_vm.onDecide,\"threshold\":_vm.threshold,\"radius\":_vm.radius,\"imageData\":_vm.imageData}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"Dy5b\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"EWfp\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"EZYi\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6bde08f0_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"GMKS\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"ACnX\")\n  __webpack_require__(\"LEfL\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6bde08f0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6bde08f0_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"EZYi\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_CameraApp__ = __webpack_require__(\"mriO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_Top__ = __webpack_require__(\"wxRh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Header__ = __webpack_require__(\"teIl\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__threejs_Viewer__ = __webpack_require__(\"Om08\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_CheckImage__ = __webpack_require__(\"ju6C\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: {\n    Top: __WEBPACK_IMPORTED_MODULE_1__components_Top__[\"a\" /* default */],\n    HeaderBar: __WEBPACK_IMPORTED_MODULE_2__components_Header__[\"a\" /* default */],\n    CameraApp: __WEBPACK_IMPORTED_MODULE_0__components_CameraApp__[\"a\" /* default */],\n    CheckImage: __WEBPACK_IMPORTED_MODULE_4__components_CheckImage__[\"a\" /* default */],\n    Viewer: __WEBPACK_IMPORTED_MODULE_3__threejs_Viewer__[\"a\" /* default */]\n  },\n  data: function data() {\n    return {\n      mode: 0, // 1: camera app, 2: chacking image, 3: three.js\n      imageData: null,\n      threshold: 120,\n      radius: 0.9\n    };\n  },\n\n  methods: {\n    openCamApp: function openCamApp() {\n      this.mode = 1;\n    },\n    closeCamApp: function closeCamApp() {\n      this.mode = 0;\n    },\n    inputFile: function inputFile(imageData) {\n      this.mode = 2;\n      this.imageData = imageData;\n    },\n    setImageData: function setImageData(imageData) {\n      this.mode = 3;\n      this.imageData = imageData;\n    },\n    changeThreshold: function changeThreshold(threshold) {\n      this.threshold = threshold;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"GMKS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.mode === 0)?_c('Top',{attrs:{\"onStart\":_vm.openCamApp,\"onInput\":_vm.inputFile}}):_vm._e(),_vm._v(\" \"),(_vm.mode === 1)?_c('CameraApp',{attrs:{\"onClose\":_vm.closeCamApp,\"onSet\":_vm.setImageData,\"onChangeThreshold\":_vm.changeThreshold,\"threshold\":_vm.threshold,\"radius\":_vm.radius}}):_vm._e(),_vm._v(\" \"),(_vm.mode === 2)?_c('CheckImage',{attrs:{\"onCancel\":_vm.closeCamApp,\"onChangeThreshold\":_vm.changeThreshold,\"onDecide\":_vm.setImageData,\"threshold\":_vm.threshold,\"radius\":_vm.radius,\"imageData\":_vm.imageData}}):_vm._e(),_vm._v(\" \"),(_vm.mode === 3)?_c('Viewer',{attrs:{\"imageData\":_vm.imageData,\"onClose\":_vm.closeCamApp}}):_vm._e(),_vm._v(\" \"),_c('HeaderBar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode === 0 || _vm.mode === 3),expression:\"mode === 0 || mode === 3\"}]})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"HCTz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_osType__ = __webpack_require__(\"o7JW\");\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      size: __WEBPACK_IMPORTED_MODULE_0__utils_osType__[\"a\" /* default */].isPC() ? 'large' : 'small'\n    };\n  }\n});\n\n/***/ }),\n\n/***/ \"HpNp\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"main\",style:({ backgroundImage: 'url(./image/back.jpg)' })},[_c('div',{ref:\"container\",staticClass:\"container\"}),_vm._v(\" \"),_c('div',{staticClass:\"btnFrame\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onStart}},[_c('img',{attrs:{\"src\":__webpack_require__(\"XYSa\")}}),_vm._v(\" \"),_c('div',[_vm._v(\"Camera\")])]),_vm._v(\" \"),_c('div',{staticClass:\"btn\"},[_c('img',{attrs:{\"src\":__webpack_require__(\"dYHa\")}}),_vm._v(\" \"),_c('div',[_vm._v(\"Image\")]),_vm._v(\" \"),_c('input',{staticClass:\"file\",attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.onSelectFile}})])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"KkvV\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(\"woOf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n\n\n\n__webpack_require__(\"pk0I\");\nvar THREE = __webpack_require__(\"Ml+6\");\nvar OrbitControls = __webpack_require__(\"wVBE\");\n\nvar RADIUS = 1;\nvar SEGMENTS = 128;\nvar THICKNESS = RADIUS / 5;\n\nfunction formatImageData(imageData) {\n  var data = new Uint8Array(imageData.data.buffer);\n  for (var i = 0; i < Math.pow(imageData.width, 2); i += 1) {\n    if (data[i * 4 + 3] === 255) data[i * 4 + 3] = data[i * 4] === 0 ? 120 : 0;\n  }\n  return data;\n}\n\nvar _class = function () {\n  function _class(container, imageData) {\n    var _this = this;\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, _class);\n\n    this.container = container;\n    this.imageData = imageData;\n\n    this.renderer = null;\n    this.scene = null;\n    this.material = null;\n    this.camera = null;\n    this.cameraCtrl = null;\n    this.reqID = null;\n\n    this.initRenderer();\n    this.initScene();\n    this.initMaterial();\n    this.initCoinRing();\n    this.initCoinPattern();\n    this.initLight();\n    this.initCamera();\n\n    this.resize = function () {\n      _this.camera.aspect = _this.container.clientWidth / _this.container.clientHeight;\n      _this.camera.updateProjectionMatrix();\n      _this.renderer.setSize(_this.container.clientWidth, _this.container.clientHeight);\n    };\n    window.addEventListener('resize', this.resize, false);\n    this.resize();\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(_class, [{\n    key: 'initRenderer',\n    value: function initRenderer() {\n      this.renderer = new THREE.WebGLRenderer({\n        preserveDrawingBuffer: true, antialias: true, alpha: true\n      });\n      this.container.appendChild(this.renderer.domElement);\n      this.renderer.setClearColor(0xffffff, 0);\n      this.play();\n    }\n  }, {\n    key: 'initScene',\n    value: function initScene() {\n      this.scene = new THREE.Scene();\n      // this.scene.add(new THREE.AxisHelper(RADIUS * 3));\n    }\n  }, {\n    key: 'initMaterial',\n    value: function initMaterial() {\n      var loader = new THREE.CubeTextureLoader();\n      loader.setPath('./envMap/');\n      var textureCube = loader.load(['posx.jpg', 'negx.jpg', 'posy.jpg', 'negy.jpg', 'posz.jpg', 'negz.jpg']);\n      textureCube.minFilter = THREE.LinearFilter;\n\n      this.material = new THREE.MeshStandardMaterial({\n        roughness: 0.8,\n        metalness: 1,\n        color: 16761685,\n        envMap: textureCube\n      });\n    }\n  }, {\n    key: 'initCoinRing',\n    value: function initCoinRing() {\n      var scene = this.scene;\n\n      var ringGeometry = new THREE.RingBufferGeometry(RADIUS, RADIUS + THICKNESS / 2, SEGMENTS, 1);\n\n      var frontRing = new THREE.Mesh(ringGeometry, this.material);\n      frontRing.position.z = THICKNESS / 2;\n      scene.add(frontRing);\n\n      var backRing = frontRing.clone();\n      backRing.position.z = -THICKNESS / 2;\n      backRing.rotateY(Math.PI);\n      scene.add(backRing);\n\n      var outerCylinderGeometry = new THREE.CylinderBufferGeometry(RADIUS + THICKNESS / 2, RADIUS + THICKNESS / 2, THICKNESS, SEGMENTS, 1, true);\n\n      var outerCylinder = new THREE.Mesh(outerCylinderGeometry, this.material);\n      outerCylinder.rotateX(Math.PI / 2);\n      scene.add(outerCylinder);\n\n      var innerCylinderGeometry = new THREE.CylinderBufferGeometry(RADIUS, RADIUS, THICKNESS, SEGMENTS, 1, true);\n\n      var innerCylinder = new THREE.Mesh(innerCylinderGeometry, this.material);\n      innerCylinder.scale.x = -1;\n      innerCylinder.rotateX(Math.PI / 2);\n      scene.add(innerCylinder);\n    }\n  }, {\n    key: 'initCoinPattern',\n    value: function initCoinPattern() {\n      var scene = this.scene;\n\n      var texture = new THREE.DataTexture(formatImageData(this.imageData), this.imageData.width, this.imageData.height, THREE.RGBAFormat, THREE.UnsignedByteType);\n      texture.needsUpdate = true;\n      texture.flipY = true;\n\n      var circleGeometry = new THREE.CircleBufferGeometry(RADIUS + THICKNESS / 4, SEGMENTS);\n\n      var circleMaterial = this.material.clone();\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(circleMaterial, {\n        bumpMap: texture,\n        bumpScale: 0.05\n      });\n\n      var front0 = new THREE.Mesh(circleGeometry, circleMaterial);\n      front0.position.z = THICKNESS / 4;\n      scene.add(front0);\n\n      var back0 = front0.clone();\n      back0.position.z = -THICKNESS / 4;\n      back0.rotateY(Math.PI);\n      scene.add(back0);\n\n      var geometry = new THREE.PlaneBufferGeometry(RADIUS * 2 + THICKNESS / 2, RADIUS * 2 + THICKNESS / 2, this.imageData.width, this.imageData.height);\n\n      var material = new THREE.MeshBasicMaterial({\n        map: texture,\n        blending: THREE.NormalBlending,\n        transparent: true\n      });\n\n      var front = new THREE.Mesh(geometry, material);\n      front.position.z = THICKNESS / 4 + 0.001;\n      scene.add(front);\n\n      var back = front.clone();\n      back.position.z = -(THICKNESS / 4) - 0.001;\n      back.rotateY(Math.PI);\n      scene.add(back);\n    }\n  }, {\n    key: 'initLight',\n    value: function initLight() {\n      var frontLight = new THREE.DirectionalLight(0xffffff, 1.25);\n      frontLight.position.set(0, 0.5, 2);\n      this.scene.add(frontLight);\n\n      var backLight = new THREE.DirectionalLight(0xffffff, 1.25);\n      backLight.position.set(0, 0.5, -2);\n      this.scene.add(backLight);\n    }\n  }, {\n    key: 'initCamera',\n    value: function initCamera() {\n      var camera = new THREE.PerspectiveCamera(40, 1, 0.1, 1000);\n      camera.position.z = RADIUS * 5;\n\n      var controls = new OrbitControls(camera, this.renderer.domElement);\n      controls.autoRotate = true;\n      controls.minDistance = RADIUS * 1.3;\n\n      this.camera = camera;\n      this.cameraCtrl = controls;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      this.cameraCtrl.update();\n      this.renderer.render(this.scene, this.camera);\n      this.play();\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      window.removeEventListener('resize', this.resize, false);\n      this.pause();\n      this.renderer.dispose();\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      this.reqID = requestAnimationFrame(this.render.bind(this));\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      cancelAnimationFrame(this.reqID);\n    }\n  }, {\n    key: 'resize4Save',\n    value: function resize4Save() {\n      this.camera.aspect = 1;\n      this.camera.updateProjectionMatrix();\n      this.renderer.setSize(this.imageData.width, this.imageData.height);\n    }\n  }, {\n    key: 'getPngBlob',\n    value: function getPngBlob(callback) {\n      var _this2 = this;\n\n      this.resize4Save();\n      this.pause();\n      this.cameraCtrl.saveState();\n      this.cameraCtrl.enabled = false;\n      this.camera.position.set(0, 0, RADIUS * 3.2);\n      this.camera.lookAt(this.cameraCtrl.target);\n      this.renderer.render(this.scene, this.camera);\n\n      setTimeout(function () {\n        // for low spec devices\n        _this2.renderer.domElement.toBlob(function (blob) {\n          callback(blob);\n          _this2.cameraCtrl.reset();\n          _this2.cameraCtrl.enabled = true;\n          _this2.resize();\n          _this2.play();\n        });\n      });\n    }\n  }, {\n    key: 'getGifBlob',\n    value: function getGifBlob(callback) {\n      var _this3 = this;\n\n      this.resize4Save();\n\n      /* global GIF */\n      var gif = new GIF({\n        workers: 4,\n        quality: 10,\n        workerScript: './libs/gif.worker.js',\n        width: this.imageData.width,\n        height: this.imageData.height,\n        transparent: 0\n      });\n\n      gif.on('finished', function (blob) {\n        callback(blob);\n        _this3.cameraCtrl.reset();\n        _this3.resize();\n        _this3.cameraCtrl.enabled = true;\n        _this3.play();\n      });\n\n      this.cameraCtrl.saveState();\n      this.cameraCtrl.enabled = false;\n      this.pause();\n\n      var frame = 20;\n      var duration = 2;\n      var index = 0;\n      var addFrame = function addFrame() {\n        if (index === frame) gif.render();else {\n          _this3.camera.position.set(Math.cos(index * Math.PI / frame - Math.PI / 2) * RADIUS * 3.4, 0, Math.sin(index * Math.PI / frame - Math.PI / 2) * RADIUS * 3.4);\n          _this3.camera.lookAt(_this3.cameraCtrl.target);\n          _this3.renderer.render(_this3.scene, _this3.camera);\n\n          setTimeout(function () {\n            // for low spec devices\n            index += 1;\n            gif.addFrame(_this3.renderer.domElement, { delay: duration * 1000 / frame, copy: true });\n            addFrame();\n          });\n        }\n      };\n\n      addFrame();\n    }\n  }]);\n\n  return _class;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (_class);\n\n/***/ }),\n\n/***/ \"LEfL\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"N+cy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"root\"},[_c('div',{style:({ maxWidth: ((Math.min(_vm.imageData.width / _vm.radius, 500)) + \"px\") }),attrs:{\"id\":\"canvasFrame\"}},[_c('div',[_c('div',{staticClass:\"frameBorder\",style:({ width: (((_vm.radius + 0.02) * 100) + \"%\"), height: (((_vm.radius + 0.02) * 100) + \"%\") })}),_vm._v(\" \"),_c('canvas',{ref:\"canvas\",style:({ width: 100 * _vm.radius + '%', height: 100 * _vm.radius + '%' })})])]),_vm._v(\" \"),_c('div',{staticClass:\"controls\"},[_c('ThresholdBar',{attrs:{\"value\":_vm.threshold,\"onChange\":_vm.onChangeThreshold}}),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onSelect}},[_vm._v(\"Enter\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onCancel}},[_vm._v(\"Cancel\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__router__ = __webpack_require__(\"YaEn\");\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_1__router__[\"a\" /* default */],\n  template: '<router-view/>'\n});\n\n/***/ }),\n\n/***/ \"NJKC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"seekBarFrame\"},[_c('div',{staticClass:\"seekBar\"},[_c('div',{staticClass:\"progress\",style:({width: _vm.value / 256 * 100 + '%'})},[_c('div',{staticClass:\"circle\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"seekAbleArea\",style:({ height: this.seeking ? '500px' : '100%' }),on:{\"touchstart\":function($event){$event.preventDefault();return _vm.handleSeekStart.apply(null, arguments)},\"mousedown\":function($event){$event.preventDefault();return _vm.handleSeekStart.apply(null, arguments)},\"touchmove\":_vm.handleSeek,\"mousemove\":_vm.handleSeek,\"touchend\":_vm.handleSeekEnd,\"mouseup\":_vm.handleSeekEnd}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"Om08\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Viewer_vue__ = __webpack_require__(\"/rWy\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_acb08494_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Viewer_vue__ = __webpack_require__(\"g3VV\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"jLpY\")\n  __webpack_require__(\"SI+p\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-acb08494\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Viewer_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_acb08494_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Viewer_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"PGuG\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\nvar URL = window.URL || window.webkitURL;\n\nvar prevStream = void 0;\nfunction detach() {\n  if (prevStream) {\n    prevStream.getTracks().forEach(function (track) {\n      return track.stop();\n    });\n    prevStream = null;\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  attach: function attach(video, option, error) {\n    if (!navigator.getUserMedia || !URL) error();else {\n      detach();\n\n      navigator.getUserMedia(option, function (stream) {\n        /* eslint-disable no-param-reassign */\n        if (video.srcObject === undefined) video.src = URL.createObjectURL(stream);else video.srcObject = stream;\n        video.play();\n        prevStream = stream;\n      }, error);\n    }\n  },\n\n  detach: detach\n});\n\n/***/ }),\n\n/***/ \"ROS8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (imageData, threshold, radius, mode) {\n  /* eslint-disable no-param-reassign  */\n  var data = imageData.data;\n  var length = imageData.width;\n\n  for (var i = 0; i < Math.pow(length, 2); i += 1) {\n    var x = i % length;\n    var y = (i - x) / length;\n\n    if (Math.pow(x - length / 2, 2) + Math.pow(y - length / 2, 2) <= Math.pow(length / 2 * radius, 2)) {\n      var r = data[i * 4];\n      var g = data[i * 4 + 1];\n      var b = data[i * 4 + 2];\n\n      if (Math.max(r, g, b) < threshold) {\n        data[i * 4] = mode ? 0 : 255;\n        data[i * 4 + 1] = 0;\n        data[i * 4 + 2] = 0;\n      } else if (mode) {\n        data[i * 4] = 255;\n        data[i * 4 + 1] = 255;\n        data[i * 4 + 2] = 255;\n      }\n    } else data[i * 4 + 3] = mode ? 0 : 100;\n  }\n\n  return imageData;\n});\n\n/***/ }),\n\n/***/ \"SI+p\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"XYSa\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjMmMzZTUwIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Ik0xMiAyMGgtN2EyIDIgMCAwIDEgLTIgLTJ2LTlhMiAyIDAgMCAxIDIgLTJoMWEyIDIgMCAwIDAgMiAtMmExIDEgMCAwIDEgMSAtMWg2YTEgMSAwIDAgMSAxIDFhMiAyIDAgMCAwIDIgMmgxYTIgMiAwIDAgMSAyIDJ2My41IiAvPgogIDxwYXRoIGQ9Ik0xMiAxNmEzIDMgMCAxIDAgMCAtNmEzIDMgMCAwIDAgMCA2eiIgLz4KICA8cGF0aCBkPSJNMTkgMjJ2LTYiIC8+CiAgPHBhdGggZD0iTTIyIDE5bC0zIC0zbC0zIDMiIC8+Cjwvc3ZnPg==\"\n\n/***/ }),\n\n/***/ \"YaEn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(\"/ocq\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_App__ = __webpack_require__(\"EWfp\");\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  mode: 'history',\n  routes: [{\n    path: '/*',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_App__[\"a\" /* default */]\n  }]\n}));\n\n/***/ }),\n\n/***/ \"Zl/t\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIzOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik0yMCA0aC0zLjE3TDE1IDJIOUw3LjE3IDRINGMtMS4xIDAtMiAuOS0yIDJ2MTJjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0tNSAxMS41VjEzSDl2Mi41TDUuNSAxMiA5IDguNVYxMWg2VjguNWwzLjUgMy41LTMuNSAzLjV6Ii8+Cjwvc3ZnPg==\"\n\n/***/ }),\n\n/***/ \"dYHa\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjMmMzZTUwIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Ik0xNSA4aC4wMSIgLz4KICA8cGF0aCBkPSJNMTIuNSAyMWgtNi41YTMgMyAwIDAgMSAtMyAtM3YtMTJhMyAzIDAgMCAxIDMgLTNoMTJhMyAzIDAgMCAxIDMgM3Y2LjUiIC8+CiAgPHBhdGggZD0iTTMgMTZsNSAtNWMuOTI4IC0uODkzIDIuMDcyIC0uODkzIDMgMGwzLjUgMy41IiAvPgogIDxwYXRoIGQ9Ik0xNCAxNGwxIC0xYy42NzkgLS42NTMgMS40NzMgLS44MjkgMi4yMTQgLS41MjYiIC8+CiAgPHBhdGggZD0iTTE5IDIydi02IiAvPgogIDxwYXRoIGQ9Ik0yMiAxOWwtMyAtM2wtMyAzIiAvPgo8L3N2Zz4K\"\n\n/***/ }),\n\n/***/ \"g3VV\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"main\",style:({ backgroundImage: 'url(./image/back.jpg)' })},[_c('div',{ref:\"container\",staticClass:\"container\"}),_vm._v(\" \"),_c('div',{staticClass:\"btnFrame\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onSavePng}},[_vm._v(\"Save PNG\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onSaveGif}},[_vm._v(\"Save GIF\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onClose}},[_vm._v(\"TOP\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.url),expression:\"url\"}],ref:\"saveArea\",staticClass:\"saveArea\"},[_c('div',[(_vm.isSafari)?_c('div',{staticClass:\"safariText\"},[_vm._v(\"Press and hold to save image\")]):_vm._e(),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.url}})]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"closeBtn\",on:{\"click\":_vm.closeSaveArea}},[_vm._v(\"Close\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"social\"},[_c('a',{staticClass:\"twitter-share-button\",attrs:{\"href\":\"https://twitter.com/share\",\"data-dnt\":\"true\",\"data-size\":\"large\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"jLpY\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"ju6C\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CheckImage_vue__ = __webpack_require__(\"8nkg\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c0bf72e2_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CheckImage_vue__ = __webpack_require__(\"N+cy\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"7EmJ\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c0bf72e2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CheckImage_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c0bf72e2_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CheckImage_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"lsO9\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"mriO\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CameraApp_vue__ = __webpack_require__(\"CZZz\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6dc858cb_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CameraApp_vue__ = __webpack_require__(\"CwZf\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Dy5b\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6dc858cb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CameraApp_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6dc858cb_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CameraApp_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"o7JW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar osType = {\n  isIOS: function isIOS() {\n    return (/iphone|ipod|ipad/.test(navigator.userAgent.toLowerCase())\n    );\n  },\n  isAndroid: function isAndroid() {\n    return (/android/.test(navigator.userAgent.toLowerCase())\n    );\n  },\n  isPC: function isPC() {\n    return !osType.isIOS() && !osType.isAndroid() && !/mobile/.test(navigator.userAgent.toLowerCase());\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (osType);\n\n/***/ }),\n\n/***/ \"teIl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Header_vue__ = __webpack_require__(\"HCTz\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_33d00248_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Header_vue__ = __webpack_require__(\"1TOb\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"lsO9\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-33d00248\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Header_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_33d00248_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Header_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"vzGa\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"wxRh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Top_vue__ = __webpack_require__(\"ylou\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_564d3d1f_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Top_vue__ = __webpack_require__(\"HpNp\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"AINW\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-564d3d1f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Top_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_564d3d1f_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Top_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"ylou\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_blueimp_load_image__ = __webpack_require__(\"H1si\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_blueimp_load_image___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_blueimp_load_image__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__threejs_ThreeCtrl__ = __webpack_require__(\"KkvV\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: ['onStart', 'onInput'],\n  data: function data() {\n    return {\n      threeCtrl: null\n    };\n  },\n\n  methods: {\n    onSelectFile: function onSelectFile(e) {\n      var _this = this;\n\n      var file = e.target.files[0];\n      __WEBPACK_IMPORTED_MODULE_0_blueimp_load_image___default.a.parseMetaData(file, function (data) {\n        __WEBPACK_IMPORTED_MODULE_0_blueimp_load_image___default()(file, function (image) {\n          var imageLength = Math.min(image.width, image.height);\n          var length = Math.min(500, imageLength);\n          var canvas = document.createElement('canvas');\n          canvas.width = length;\n          canvas.height = length;\n          var ctx = canvas.getContext('2d');\n          ctx.drawImage(image, (image.width - imageLength) / 2, (image.height - imageLength) / 2, imageLength, imageLength, 0, 0, length, length);\n          _this.onInput(ctx.getImageData(0, 0, length, length));\n        }, {\n          canvas: true,\n          cover: true,\n          aspectRatio: 1,\n          orientation: data.exif ? data.exif.get('Orientation') : 0\n        });\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    var image = new Image();\n    image.src = './image/default.png';\n    image.onload = function () {\n      var canvas = document.createElement('canvas');\n      var length = image.width * 1.1;\n      canvas.width = length;\n      canvas.height = length;\n      var ctx = canvas.getContext('2d');\n      ctx.fillStyle = '#fff';\n      ctx.fillRect(0, 0, length, length);\n      ctx.drawImage(image, (length - image.width) / 2, (length - image.height) / 2);\n      _this2.threeCtrl = new __WEBPACK_IMPORTED_MODULE_1__threejs_ThreeCtrl__[\"a\" /* default */](_this2.$refs.container, ctx.getImageData(0, 0, length, length));\n    };\n  },\n  destroyed: function destroyed() {\n    this.threeCtrl.destroy();\n  }\n});\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// js/app.c3e0cb47899e50d0e236.js","<template>\n  <div>\n    <div class=\"main\" :style=\"{ backgroundImage: 'url(./image/back.jpg)' }\">\n      <div class=\"container\" ref=\"container\"/>\n      <div class=\"btnFrame\">\n        <div class=\"btn\" @click=\"onSavePng\">Save PNG</div>\n        <div class=\"btn\" @click=\"onSaveGif\">Save GIF</div>\n        <div class=\"btn\" @click=\"onClose\">TOP</div>\n      </div>\n    </div>\n    <div class=\"saveArea\" ref=\"saveArea\" v-show=\"url\">\n      <div>\n        <div v-if=\"isSafari\" class=\"safariText\">Press and hold to save image</div>\n        <img :src=\"url\"/>\n      </div>\n      <div class=\"social\">\n        <a class=\"twitter-share-button\" href=\"https://twitter.com/share\" data-dnt=\"true\" data-size=\"large\"/>\n      </div>\n      <div class=\"closeBtn\" @click=\"closeSaveArea\">Close</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ThreeCtrl from './ThreeCtrl';\n\nconst { saveAs } = require('file-saver');\nconst platform = require('platform');\n\nexport default {\n  props: ['imageData', 'onClose'],\n  data() {\n    return {\n      threeCtrl: null,\n      url: null,\n      snsInit: false,\n      isSafari: platform.name === 'Safari',\n    };\n  },\n  methods: {\n    onSavePng() {\n      this.threeCtrl.getPngBlob(blob => this.saveImage(blob, 'png'));\n    },\n    onSaveGif() {\n      this.threeCtrl.getGifBlob(blob => this.saveImage(blob, 'gif'));\n    },\n    saveImage(blob, type) {\n      const name = `photocoin.${type}`;\n      if (!this.isSafari) saveAs(blob, name);\n\n      this.url = URL.createObjectURL(new File([blob], name, { type: `image/${type}` }));\n      setTimeout(() => this.threeCtrl.pause());\n\n      if (!this.snsInit) {\n        /* global twttr */\n        twttr.widgets.load(this.$refs.saveArea);\n        this.snsInit = true;\n      }\n    },\n    closeSaveArea() {\n      this.threeCtrl.play();\n      URL.revokeObjectURL(this.url);\n      this.url = null;\n    },\n  },\n  mounted() {\n    this.threeCtrl = new ThreeCtrl(this.$refs.container, this.imageData);\n  },\n  destroyed() {\n    this.threeCtrl.destroy();\n  },\n};\n</script>\n\n<style scoped>\n.main {\n  background: center/cover no-repeat;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.container {\n  height: 100%;\n  width: 100%;\n}\n\n.btnFrame {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.btn {\n  float: left;\n  width: 33.33%;\n  background: rgba(255, 255, 255, 0.8);\n  padding: 12px 0;\n  font-size: 24px;\n  cursor: pointer;\n  color: #222;\n  transition: 0.25s;\n}\n\n.btn:hover {\n  background: rgba(120, 120, 120, 0.8);\n  color: #fff;\n}\n\n.saveArea {\n  position: relative;\n  z-index: 1;\n  min-height: 100vh;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 20px 0 50px;\n  box-sizing: border-box;\n  color: #222;\n}\n\n.safariText {\n  font-size: 20px;\n  padding-top: 10px;\n}\n\n.saveArea img {\n  width: 500px;\n  max-width: 80%;\n  margin: 10px auto 0;\n}\n\n.social {\n  margin: 20px 0 50px;\n}\n\n.closeBtn {\n  border-radius: 5px;\n  background: #666;\n  margin: 30px auto 0;\n  color: #fff;\n  cursor: pointer;\n  width: 100px;\n  padding: 12px 0;\n  font-size: 20px;\n  font-weight: bold;\n  transition: 0.25s;\n}\n\n.closeBtn:hover {\n  background: #ddd;\n  color: #222;\n}\n\n@media screen and (max-width: 500px) {\n  .btn {\n    font-size: 18px;\n  }\n}\n</style>\n\n<style>\n.social > iframe {\n  vertical-align: bottom;\n  margin-left: 10px;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/threejs/Viewer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['root', _vm.size]},[_c('span',{staticClass:\"logo\"},[_vm._v(\"PhotoCoin\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-33d00248\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Header.vue\n// module id = 1TOb\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-08398c4f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ThresholdBar.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ThresholdBar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ThresholdBar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-08398c4f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ThresholdBar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-08398c4f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ThresholdBar.vue\n// module id = 4unC\n// module chunks = 1","<template>\n  <div class=\"seekBarFrame\">\n    <div class=\"seekBar\">\n      <div class=\"progress\" :style=\"{width: value / 256 * 100 + '%'}\">\n        <div class=\"circle\"/>\n      </div>\n    </div>\n    <div class=\"seekAbleArea\"\n      :style=\"{ height: this.seeking ? '500px' : '100%' }\"\n      @touchstart.prevent=\"handleSeekStart\"\n      @mousedown.prevent=\"handleSeekStart\"\n      @touchmove=\"handleSeek\"\n      @mousemove=\"handleSeek\"\n      @touchend=\"handleSeekEnd\"\n      @mouseup=\"handleSeekEnd\"\n    />\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['value', 'onChange'],\n  data() {\n    return {\n      seeking: false,\n    };\n  },\n  methods: {\n    handleSeekStart(e) {\n      this.seeking = true;\n      this.handleSeek(e);\n    },\n    handleSeek(e) {\n      if (!this.seeking) return;\n\n      const x = typeof e.clientX === 'number' ? e.clientX : e.touches[0].pageX;\n      const t = ((x - e.target.getBoundingClientRect().left) / e.target.clientWidth) * 256;\n      this.onChange(Math.max(0, Math.min(256, t)));\n    },\n    handleSeekEnd() {\n      this.seeking = false;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.seekBarFrame {\n  position: absolute;\n  bottom: 100%;\n  margin-bottom: 10px;\n  width: 80%;\n  left: 10%;\n  height: 30px;\n}\n\n.seekBarFrame:hover > .seekBar {\n  height: 20%;\n  top: 40%;\n}\n\n.seekBar {\n  height: 10%;\n  top: 45%;\n  position: absolute;\n  left: 0;\n  right: 0;\n  border-radius: 2px;\n  background: #999;\n}\n\n.progress {\n  height: 100%;\n  position: absolute;\n  top: 0;\n  background: #e60014;\n  border-radius: 2px;\n  left: 0;\n}\n\n.circle {\n  width: 23px;\n  height: 23px;\n  border-radius: 50%;\n  background: linear-gradient(to right, #e83545 0%, #e60014 100%);\n  position: absolute;\n  top: 50%;\n  left: 100%;\n  transform: translate(-50%,-50%);\n  box-shadow: 0 1px 10px rgba(0,0,0,.3);\n}\n\n.seekAbleArea {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  cursor: pointer;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ThresholdBar.vue","module.exports = \"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjZmZmIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSI0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0xMCAyMHYtNmg0djZoNXYtOGgzTDEyIDMgMiAxMmgzdjh6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/home.svg\n// module id = 77/w\n// module chunks = 1","<template>\n  <div class=\"root\">\n    <div id=\"canvasFrame\" :style=\"{ maxWidth: `${Math.min(imageData.width / radius, 500)}px` }\">\n      <div>\n        <div class=\"frameBorder\" :style=\"{ width: `${(radius + 0.02) * 100}%`, height: `${(radius + 0.02) * 100}%` }\"/>\n        <canvas ref=\"canvas\" :style=\"{ width: 100 * radius + '%', height: 100 * radius + '%' }\"/>\n      </div>\n    </div>\n    <div class=\"controls\">\n      <ThresholdBar :value=\"threshold\" :onChange=\"onChangeThreshold\"/>\n      <div class=\"btn\" @click=\"onSelect\">Enter</div>\n      <div class=\"btn\" @click=\"onCancel\">Cancel</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport detectCanvas from '@/utils/detectCanvas';\nimport ThresholdBar from '@/components/ThresholdBar';\n\nexport default {\n  components: { ThresholdBar },\n  props: ['onCancel', 'onDecide', 'onChangeThreshold', 'threshold', 'imageData', 'radius'],\n  data() {\n    return {\n      ctx: null,\n    };\n  },\n  watch: {\n    threshold() {\n      this.draw();\n    },\n  },\n  mounted() {\n    const canvas = this.$refs.canvas;\n    canvas.width = this.imageData.width;\n    canvas.height = this.imageData.width;\n    this.ctx = canvas.getContext('2d');\n    this.draw();\n  },\n  methods: {\n    onSelect() {\n      this.onDecide(this.ctx.getImageData(0, 0, this.imageData.width, this.imageData.height));\n    },\n    draw() {\n      const tmpImageData = this.ctx.getImageData(0, 0, this.imageData.width, this.imageData.height);\n      tmpImageData.data.set(detectCanvas(\n        {\n          data: new Uint8ClampedArray(this.imageData.data),\n          width: this.imageData.width,\n        },\n        this.threshold,\n        1,\n        1,\n      ).data);\n      this.ctx.putImageData(tmpImageData, 0, 0);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.root {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #fff;\n}\n\n#canvasFrame {\n  margin: 0 auto;\n}\n\n#canvasFrame > div {\n  position: relative;\n  padding-top: 100%;\n}\n\n.frameBorder {\n  background: #000;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%,-50%);\n}\n\ncanvas {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%,-50%);\n}\n\n.controls {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  text-align: center;\n  padding-bottom: 30px;\n}\n\n.btn {\n  border-radius: 5px;\n  background: #666;\n  display: inline-block;\n  margin: 20px 20px 0;\n  color: #fff;\n  cursor: pointer;\n  width: 100px;\n  padding: 12px 0;\n  font-size: 20px;\n  font-weight: bold;\n  transition: 0.25s;\n}\n\n.btn:hover {\n  background: #ddd;\n  color: #222;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/CheckImage.vue","<template>\n  <div class=\"root\">\n    <div id=\"canvasFrame\" :style=\"{ maxWidth: `${length}px` }\">\n      <div>\n        <canvas ref=\"canvas\" :style=\"{ transform: `rotateY(${isPC || facingMode === 'user' ? 180 : 0}deg)` }\"/>\n      </div>\n    </div>\n    <video ref=\"video\" playsinline @canplaythrough=\"startRendering\"/>\n    <div class=\"controls\">\n      <ThresholdBar :value=\"threshold\" :onChange=\"onChangeThreshold\"/>\n      <div class=\"backBtn\" @click=\"closeApp\"><img src=\"../assets/home.svg\"/></div>\n      <div class=\"facingBtn\" v-if=\"!isPC\" @click=\"changeFacing\"><img src=\"../assets/camera.svg\"/></div>\n      <div class=\"shutter\" @click=\"shoot\"/>\n    </div>\n\n    <div class=\"blackFilter\" ref=\"blackFilter\"/>\n    <CheckImage v-if=\"checking\" :onCancel=\"onCancel\" :onChangeThreshold=\"onChangeThreshold\" :onDecide=\"onDecide\" :threshold=\"threshold\" :radius=\"radius\" :imageData=\"imageData\"/>\n  </div>\n</template>\n\n<script>\nimport getCam from '@/utils/getCam';\nimport detectCanvas from '@/utils/detectCanvas';\nimport CheckImage from '@/components/CheckImage';\nimport osType from '@/utils/osType';\nimport ThresholdBar from '@/components/ThresholdBar';\n\nexport default {\n  props: ['onClose', 'onSet', 'threshold', 'onChangeThreshold', 'radius'],\n  components: { CheckImage, ThresholdBar },\n  data() {\n    return {\n      reqID: null,\n      vw: null,\n      vh: null,\n      length: null,\n      ctx: null,\n      imageData: null,\n      checking: false,\n      facingMode: 'environment',\n      isPC: osType.isPC(),\n    };\n  },\n  mounted() {\n    this.setVideo();\n  },\n  methods: {\n    setVideo() {\n      getCam.attach(this.$refs.video, {\n        video: { facingMode: this.facingMode }, audio: false,\n      }, () => {\n        /* eslint-disable no-alert */\n        alert('Camera could not be obtained.');\n        this.onClose();\n      });\n    },\n    startRendering() {\n      const video = this.$refs.video;\n      const vw = video.videoWidth;\n      const vh = video.videoHeight;\n      const length = Math.min(vw, vh);\n      this.vw = vw;\n      this.vh = vh;\n      this.length = length;\n\n      const canvas = this.$refs.canvas;\n      canvas.width = length;\n      canvas.height = length;\n\n      if (!this.ctx) this.ctx = canvas.getContext('2d');\n\n      this.reqID = requestAnimationFrame(this.render.bind(this));\n    },\n    stopRendering() {\n      getCam.detach();\n      cancelAnimationFrame(this.reqID);\n    },\n    render() {\n      const length = this.length;\n      const ctx = this.ctx;\n\n      ctx.drawImage(this.$refs.video, (this.vw - length) / 2, (this.vh - length) / 2,\n        length, length, 0, 0, length, length);\n      const imageData = ctx.getImageData(0, 0, length, length);\n      ctx.putImageData(detectCanvas(imageData, this.threshold, this.radius, 0), 0, 0);\n      this.reqID = requestAnimationFrame(this.render.bind(this));\n    },\n    closeApp() {\n      this.stopRendering();\n      this.onClose();\n    },\n    shoot() {\n      this.$refs.blackFilter.style.display = 'block';\n      setTimeout(() => {\n        this.$refs.blackFilter.style.opacity = 0;\n      }, 100);\n      setTimeout(() => {\n        this.$refs.blackFilter.style.display = 'none';\n        this.$refs.blackFilter.style.opacity = 1;\n\n        const length = this.length * this.radius;\n        const ctx = this.ctx;\n\n        ctx.drawImage(this.$refs.video, (this.vw - length) / 2, (this.vh - length) / 2,\n          length, length, 0, 0, length, length);\n        this.imageData = ctx.getImageData(0, 0, length, length);\n        this.stopRendering();\n        this.checking = true;\n      }, 500);\n    },\n    changeFacing() {\n      this.facingMode = this.facingMode === 'user' ? 'environment' : 'user';\n      this.setVideo();\n    },\n    onDecide(imageData) {\n      this.checking = false;\n      this.onSet(imageData);\n    },\n    onCancel() {\n      this.checking = false;\n      this.setVideo();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.root {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #fff;\n}\n\n#canvasFrame {\n  margin: 0 auto;\n}\n\n#canvasFrame > div {\n  position: relative;\n  padding-top: 100%;\n  background: #000;\n}\n\ncanvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\nvideo {\n  max-width: 100%;\n  position: -webkit-sticky;\n  display: none;\n}\n\n.controls {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #000;\n}\n\n.backBtn {\n  position: absolute;\n  top: 50%;\n  left: 10px;\n  transform: translateY(-50%);\n  transition: 0.25s;\n  padding: 12px 10px 5px;\n  cursor: pointer;\n}\n\n.backBtn:hover {\n  opacity: 0.8;\n}\n\n.facingBtn {\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  padding: 17px 10px 5px;\n}\n\n.shutter {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  border: 2px solid #666;\n  box-shadow: 0 0 0 8px #fff;\n  background: #fff;\n  cursor: pointer;\n  transition: .2s;\n  margin: 25px auto;\n}\n\n.shutter:hover {\n  opacity: .8;\n}\n\n.blackFilter {\n  background: #000;\n  transition: 0.4s;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: none;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/CameraApp.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"root\"},[_c('div',{style:({ maxWidth: (_vm.length + \"px\") }),attrs:{\"id\":\"canvasFrame\"}},[_c('div',[_c('canvas',{ref:\"canvas\",style:({ transform: (\"rotateY(\" + (_vm.isPC || _vm.facingMode === 'user' ? 180 : 0) + \"deg)\") })})])]),_vm._v(\" \"),_c('video',{ref:\"video\",attrs:{\"playsinline\":\"\"},on:{\"canplaythrough\":_vm.startRendering}}),_vm._v(\" \"),_c('div',{staticClass:\"controls\"},[_c('ThresholdBar',{attrs:{\"value\":_vm.threshold,\"onChange\":_vm.onChangeThreshold}}),_vm._v(\" \"),_c('div',{staticClass:\"backBtn\",on:{\"click\":_vm.closeApp}},[_c('img',{attrs:{\"src\":require(\"../assets/home.svg\")}})]),_vm._v(\" \"),(!_vm.isPC)?_c('div',{staticClass:\"facingBtn\",on:{\"click\":_vm.changeFacing}},[_c('img',{attrs:{\"src\":require(\"../assets/camera.svg\")}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"shutter\",on:{\"click\":_vm.shoot}})],1),_vm._v(\" \"),_c('div',{ref:\"blackFilter\",staticClass:\"blackFilter\"}),_vm._v(\" \"),(_vm.checking)?_c('CheckImage',{attrs:{\"onCancel\":_vm.onCancel,\"onChangeThreshold\":_vm.onChangeThreshold,\"onDecide\":_vm.onDecide,\"threshold\":_vm.threshold,\"radius\":_vm.radius,\"imageData\":_vm.imageData}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6dc858cb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/CameraApp.vue\n// module id = CwZf\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6bde08f0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6bde08f0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./App.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6bde08f0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6bde08f0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/App.vue\n// module id = EWfp\n// module chunks = 1","<template>\n  <div id=\"app\">\n    <Top v-if=\"mode === 0\" :onStart=\"openCamApp\" :onInput=\"inputFile\"/>\n    <CameraApp v-if=\"mode === 1\" :onClose=\"closeCamApp\" :onSet=\"setImageData\" :onChangeThreshold=\"changeThreshold\" :threshold=\"threshold\" :radius=\"radius\"/>\n    <CheckImage v-if=\"mode === 2\" :onCancel=\"closeCamApp\" :onChangeThreshold=\"changeThreshold\" :onDecide=\"setImageData\" :threshold=\"threshold\" :radius=\"radius\" :imageData=\"imageData\"/>\n    <Viewer v-if=\"mode === 3\" :imageData=\"imageData\" :onClose=\"closeCamApp\"/>\n    <HeaderBar v-show=\"mode === 0 || mode === 3\"/>\n  </div>\n</template>\n\n<script>\nimport CameraApp from '@/components/CameraApp';\nimport Top from '@/components/Top';\nimport HeaderBar from '@/components/Header';\nimport Viewer from '@/threejs/Viewer';\nimport CheckImage from '@/components/CheckImage';\n\nexport default {\n  components: {\n    Top,\n    HeaderBar,\n    CameraApp,\n    CheckImage,\n    Viewer,\n  },\n  data() {\n    return {\n      mode: 0, // 1: camera app, 2: chacking image, 3: three.js\n      imageData: null,\n      threshold: 120,\n      radius: 0.9,\n    };\n  },\n  methods: {\n    openCamApp() {\n      this.mode = 1;\n    },\n    closeCamApp() {\n      this.mode = 0;\n    },\n    inputFile(imageData) {\n      this.mode = 2;\n      this.imageData = imageData;\n    },\n    setImageData(imageData) {\n      this.mode = 3;\n      this.imageData = imageData;\n    },\n    changeThreshold(threshold) {\n      this.threshold = threshold;\n    },\n  },\n};\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  user-select: none;\n  letter-spacing: 0.1em;\n}\n</style>\n\n<style scoped>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.mode === 0)?_c('Top',{attrs:{\"onStart\":_vm.openCamApp,\"onInput\":_vm.inputFile}}):_vm._e(),_vm._v(\" \"),(_vm.mode === 1)?_c('CameraApp',{attrs:{\"onClose\":_vm.closeCamApp,\"onSet\":_vm.setImageData,\"onChangeThreshold\":_vm.changeThreshold,\"threshold\":_vm.threshold,\"radius\":_vm.radius}}):_vm._e(),_vm._v(\" \"),(_vm.mode === 2)?_c('CheckImage',{attrs:{\"onCancel\":_vm.closeCamApp,\"onChangeThreshold\":_vm.changeThreshold,\"onDecide\":_vm.setImageData,\"threshold\":_vm.threshold,\"radius\":_vm.radius,\"imageData\":_vm.imageData}}):_vm._e(),_vm._v(\" \"),(_vm.mode === 3)?_c('Viewer',{attrs:{\"imageData\":_vm.imageData,\"onClose\":_vm.closeCamApp}}):_vm._e(),_vm._v(\" \"),_c('HeaderBar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode === 0 || _vm.mode === 3),expression:\"mode === 0 || mode === 3\"}]})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6bde08f0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/App.vue\n// module id = GMKS\n// module chunks = 1","<template>\n  <div :class=\"['root', size]\">\n    <span class=\"logo\">PhotoCoin</span>\n  </div>\n</template>\n\n<script>\nimport osType from '@/utils/osType';\n\nexport default {\n  data() {\n    return {\n      size: osType.isPC() ? 'large' : 'small',\n    };\n  },\n};\n</script>\n\n<style scoped>\n.root {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 56px;\n}\n\n.root.small {\n  height: 40px;\n}\n\n.logo {\n  position: absolute;\n  top: 50%;\n  left: 16px;\n  transform: translateY(-50%);\n  font-size: 32px;\n  font-weight: bold;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Header.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"main\",style:({ backgroundImage: 'url(./image/back.jpg)' })},[_c('div',{ref:\"container\",staticClass:\"container\"}),_vm._v(\" \"),_c('div',{staticClass:\"btnFrame\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onStart}},[_c('img',{attrs:{\"src\":require(\"../assets/cameraIcon.svg\")}}),_vm._v(\" \"),_c('div',[_vm._v(\"Camera\")])]),_vm._v(\" \"),_c('div',{staticClass:\"btn\"},[_c('img',{attrs:{\"src\":require(\"../assets/photoIcon.svg\")}}),_vm._v(\" \"),_c('div',[_vm._v(\"Image\")]),_vm._v(\" \"),_c('input',{staticClass:\"file\",attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.onSelectFile}})])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-564d3d1f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Top.vue\n// module id = HpNp\n// module chunks = 1","require('canvas-toBlob');\nconst THREE = require('three');\nconst OrbitControls = require('three-orbitcontrols');\n\nconst RADIUS = 1;\nconst SEGMENTS = 128;\nconst THICKNESS = RADIUS / 5;\n\nfunction formatImageData(imageData) {\n  const data = new Uint8Array(imageData.data.buffer);\n  for (let i = 0; i < imageData.width ** 2; i += 1) {\n    if (data[(i * 4) + 3] === 255) data[(i * 4) + 3] = data[i * 4] === 0 ? 120 : 0;\n  }\n  return data;\n}\n\nexport default class {\n  constructor(container, imageData) {\n    this.container = container;\n    this.imageData = imageData;\n\n    this.renderer = null;\n    this.scene = null;\n    this.material = null;\n    this.camera = null;\n    this.cameraCtrl = null;\n    this.reqID = null;\n\n    this.initRenderer();\n    this.initScene();\n    this.initMaterial();\n    this.initCoinRing();\n    this.initCoinPattern();\n    this.initLight();\n    this.initCamera();\n\n    this.resize = () => {\n      this.camera.aspect = this.container.clientWidth / this.container.clientHeight;\n      this.camera.updateProjectionMatrix();\n      this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    };\n    window.addEventListener('resize', this.resize, false);\n    this.resize();\n  }\n\n  initRenderer() {\n    this.renderer = new THREE.WebGLRenderer({\n      preserveDrawingBuffer: true, antialias: true, alpha: true,\n    });\n    this.container.appendChild(this.renderer.domElement);\n    this.renderer.setClearColor(0xffffff, 0);\n    this.play();\n  }\n\n  initScene() {\n    this.scene = new THREE.Scene();\n    // this.scene.add(new THREE.AxisHelper(RADIUS * 3));\n  }\n\n  initMaterial() {\n    const loader = new THREE.CubeTextureLoader();\n    loader.setPath('./envMap/');\n    const textureCube = loader.load([\n      'posx.jpg',\n      'negx.jpg',\n      'posy.jpg',\n      'negy.jpg',\n      'posz.jpg',\n      'negz.jpg',\n    ]);\n    textureCube.minFilter = THREE.LinearFilter;\n\n    this.material = new THREE.MeshStandardMaterial({\n      roughness: 0.8,\n      metalness: 1,\n      color: 16761685,\n      envMap: textureCube,\n    });\n  }\n\n  initCoinRing() {\n    const scene = this.scene;\n\n    const ringGeometry = new THREE.RingBufferGeometry(\n      RADIUS,\n      RADIUS + (THICKNESS / 2),\n      SEGMENTS,\n      1,\n    );\n\n    const frontRing = new THREE.Mesh(ringGeometry, this.material);\n    frontRing.position.z = THICKNESS / 2;\n    scene.add(frontRing);\n\n    const backRing = frontRing.clone();\n    backRing.position.z = -THICKNESS / 2;\n    backRing.rotateY(Math.PI);\n    scene.add(backRing);\n\n    const outerCylinderGeometry = new THREE.CylinderBufferGeometry(\n      RADIUS + (THICKNESS / 2),\n      RADIUS + (THICKNESS / 2),\n      THICKNESS,\n      SEGMENTS,\n      1,\n      true,\n    );\n\n    const outerCylinder = new THREE.Mesh(outerCylinderGeometry, this.material);\n    outerCylinder.rotateX(Math.PI / 2);\n    scene.add(outerCylinder);\n\n    const innerCylinderGeometry = new THREE.CylinderBufferGeometry(\n      RADIUS,\n      RADIUS,\n      THICKNESS,\n      SEGMENTS,\n      1,\n      true,\n    );\n\n    const innerCylinder = new THREE.Mesh(innerCylinderGeometry, this.material);\n    innerCylinder.scale.x = -1;\n    innerCylinder.rotateX(Math.PI / 2);\n    scene.add(innerCylinder);\n  }\n\n  initCoinPattern() {\n    const scene = this.scene;\n\n    const texture = new THREE.DataTexture(formatImageData(this.imageData),\n      this.imageData.width, this.imageData.height, THREE.RGBAFormat, THREE.UnsignedByteType);\n    texture.needsUpdate = true;\n    texture.flipY = true;\n\n    const circleGeometry = new THREE.CircleBufferGeometry(RADIUS + (THICKNESS / 4), SEGMENTS);\n\n    const circleMaterial = this.material.clone();\n    Object.assign(circleMaterial, {\n      bumpMap: texture,\n      bumpScale: 0.05,\n    });\n\n    const front0 = new THREE.Mesh(circleGeometry, circleMaterial);\n    front0.position.z = THICKNESS / 4;\n    scene.add(front0);\n\n    const back0 = front0.clone();\n    back0.position.z = -THICKNESS / 4;\n    back0.rotateY(Math.PI);\n    scene.add(back0);\n\n    const geometry = new THREE.PlaneBufferGeometry((RADIUS * 2) + (THICKNESS / 2),\n      (RADIUS * 2) + (THICKNESS / 2),\n      this.imageData.width, this.imageData.height);\n\n    const material = new THREE.MeshBasicMaterial({\n      map: texture,\n      blending: THREE.NormalBlending,\n      transparent: true,\n    });\n\n    const front = new THREE.Mesh(geometry, material);\n    front.position.z = (THICKNESS / 4) + 0.001;\n    scene.add(front);\n\n    const back = front.clone();\n    back.position.z = -(THICKNESS / 4) - 0.001;\n    back.rotateY(Math.PI);\n    scene.add(back);\n  }\n\n  initLight() {\n    const frontLight = new THREE.DirectionalLight(0xffffff, 1.25);\n    frontLight.position.set(0, 0.5, 2);\n    this.scene.add(frontLight);\n\n    const backLight = new THREE.DirectionalLight(0xffffff, 1.25);\n    backLight.position.set(0, 0.5, -2);\n    this.scene.add(backLight);\n  }\n\n  initCamera() {\n    const camera = new THREE.PerspectiveCamera(40, 1, 0.1, 1000);\n    camera.position.z = RADIUS * 5;\n\n    const controls = new OrbitControls(camera, this.renderer.domElement);\n    controls.autoRotate = true;\n    controls.minDistance = RADIUS * 1.3;\n\n    this.camera = camera;\n    this.cameraCtrl = controls;\n  }\n\n  render() {\n    this.cameraCtrl.update();\n    this.renderer.render(this.scene, this.camera);\n    this.play();\n  }\n\n  destroy() {\n    window.removeEventListener('resize', this.resize, false);\n    this.pause();\n    this.renderer.dispose();\n  }\n\n  play() {\n    this.reqID = requestAnimationFrame(this.render.bind(this));\n  }\n\n  pause() {\n    cancelAnimationFrame(this.reqID);\n  }\n\n  resize4Save() {\n    this.camera.aspect = 1;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(this.imageData.width, this.imageData.height);\n  }\n\n  getPngBlob(callback) {\n    this.resize4Save();\n    this.pause();\n    this.cameraCtrl.saveState();\n    this.cameraCtrl.enabled = false;\n    this.camera.position.set(0, 0, RADIUS * 3.2);\n    this.camera.lookAt(this.cameraCtrl.target);\n    this.renderer.render(this.scene, this.camera);\n\n    setTimeout(() => { // for low spec devices\n      this.renderer.domElement.toBlob((blob) => {\n        callback(blob);\n        this.cameraCtrl.reset();\n        this.cameraCtrl.enabled = true;\n        this.resize();\n        this.play();\n      });\n    });\n  }\n\n  getGifBlob(callback) {\n    this.resize4Save();\n\n    /* global GIF */\n    const gif = new GIF({\n      workers: 4,\n      quality: 10,\n      workerScript: './libs/gif.worker.js',\n      width: this.imageData.width,\n      height: this.imageData.height,\n      transparent: 0,\n    });\n\n    gif.on('finished', (blob) => {\n      callback(blob);\n      this.cameraCtrl.reset();\n      this.resize();\n      this.cameraCtrl.enabled = true;\n      this.play();\n    });\n\n    this.cameraCtrl.saveState();\n    this.cameraCtrl.enabled = false;\n    this.pause();\n\n    const frame = 20;\n    const duration = 2;\n    let index = 0;\n    const addFrame = () => {\n      if (index === frame) gif.render();\n      else {\n        this.camera.position.set(\n          Math.cos(((index * Math.PI) / frame) - (Math.PI / 2)) * RADIUS * 3.4,\n          0,\n          Math.sin(((index * Math.PI) / frame) - (Math.PI / 2)) * RADIUS * 3.4,\n        );\n        this.camera.lookAt(this.cameraCtrl.target);\n        this.renderer.render(this.scene, this.camera);\n\n        setTimeout(() => { // for low spec devices\n          index += 1;\n          gif.addFrame(this.renderer.domElement, { delay: (duration * 1000) / frame, copy: true });\n          addFrame();\n        });\n      }\n    };\n\n    addFrame();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/threejs/ThreeCtrl.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"root\"},[_c('div',{style:({ maxWidth: ((Math.min(_vm.imageData.width / _vm.radius, 500)) + \"px\") }),attrs:{\"id\":\"canvasFrame\"}},[_c('div',[_c('div',{staticClass:\"frameBorder\",style:({ width: (((_vm.radius + 0.02) * 100) + \"%\"), height: (((_vm.radius + 0.02) * 100) + \"%\") })}),_vm._v(\" \"),_c('canvas',{ref:\"canvas\",style:({ width: 100 * _vm.radius + '%', height: 100 * _vm.radius + '%' })})])]),_vm._v(\" \"),_c('div',{staticClass:\"controls\"},[_c('ThresholdBar',{attrs:{\"value\":_vm.threshold,\"onChange\":_vm.onChangeThreshold}}),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onSelect}},[_vm._v(\"Enter\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onCancel}},[_vm._v(\"Cancel\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c0bf72e2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/CheckImage.vue\n// module id = N+cy\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport router from './router';\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<router-view/>',\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"seekBarFrame\"},[_c('div',{staticClass:\"seekBar\"},[_c('div',{staticClass:\"progress\",style:({width: _vm.value / 256 * 100 + '%'})},[_c('div',{staticClass:\"circle\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"seekAbleArea\",style:({ height: this.seeking ? '500px' : '100%' }),on:{\"touchstart\":function($event){$event.preventDefault();return _vm.handleSeekStart.apply(null, arguments)},\"mousedown\":function($event){$event.preventDefault();return _vm.handleSeekStart.apply(null, arguments)},\"touchmove\":_vm.handleSeek,\"mousemove\":_vm.handleSeek,\"touchend\":_vm.handleSeekEnd,\"mouseup\":_vm.handleSeekEnd}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-08398c4f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ThresholdBar.vue\n// module id = NJKC\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-acb08494\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Viewer.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-acb08494\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./Viewer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Viewer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Viewer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-acb08494\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Viewer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-acb08494\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/threejs/Viewer.vue\n// module id = Om08\n// module chunks = 1","navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia\n  || navigator.mozGetUserMedia;\nconst URL = window.URL || window.webkitURL;\n\nlet prevStream;\nfunction detach() {\n  if (prevStream) {\n    prevStream.getTracks().forEach(track => track.stop());\n    prevStream = null;\n  }\n}\n\nexport default {\n  attach(video, option, error) {\n    if (!navigator.getUserMedia || !URL) error();\n    else {\n      detach();\n\n      navigator.getUserMedia(option, (stream) => {\n        /* eslint-disable no-param-reassign */\n        if (video.srcObject === undefined) video.src = URL.createObjectURL(stream);\n        else video.srcObject = stream;\n        video.play();\n        prevStream = stream;\n      }, error);\n    }\n  },\n  detach,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/getCam.js","export default function (imageData, threshold, radius, mode) {\n  /* eslint-disable no-param-reassign  */\n  const data = imageData.data;\n  const length = imageData.width;\n\n  for (let i = 0; i < length ** 2; i += 1) {\n    const x = (i % length);\n    const y = ((i - x) / length);\n\n    if (((x - (length / 2)) ** 2) + ((y - (length / 2)) ** 2) <= ((length / 2) * radius) ** 2) {\n      const r = data[i * 4];\n      const g = data[(i * 4) + 1];\n      const b = data[(i * 4) + 2];\n\n      if (Math.max(r, g, b) < threshold) {\n        data[i * 4] = mode ? 0 : 255;\n        data[(i * 4) + 1] = 0;\n        data[(i * 4) + 2] = 0;\n      } else if (mode) {\n        data[i * 4] = 255;\n        data[(i * 4) + 1] = 255;\n        data[(i * 4) + 2] = 255;\n      }\n    } else data[(i * 4) + 3] = mode ? 0 : 100;\n  }\n\n  return imageData;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/detectCanvas.js","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjMmMzZTUwIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Ik0xMiAyMGgtN2EyIDIgMCAwIDEgLTIgLTJ2LTlhMiAyIDAgMCAxIDIgLTJoMWEyIDIgMCAwIDAgMiAtMmExIDEgMCAwIDEgMSAtMWg2YTEgMSAwIDAgMSAxIDFhMiAyIDAgMCAwIDIgMmgxYTIgMiAwIDAgMSAyIDJ2My41IiAvPgogIDxwYXRoIGQ9Ik0xMiAxNmEzIDMgMCAxIDAgMCAtNmEzIDMgMCAwIDAgMCA2eiIgLz4KICA8cGF0aCBkPSJNMTkgMjJ2LTYiIC8+CiAgPHBhdGggZD0iTTIyIDE5bC0zIC0zbC0zIDMiIC8+Cjwvc3ZnPg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/cameraIcon.svg\n// module id = XYSa\n// module chunks = 1","import Vue from 'vue';\nimport Router from 'vue-router';\nimport App from '@/components/App';\n\nVue.use(Router);\n\nexport default new Router({\n  mode: 'history',\n  routes: [\n    {\n      path: '/*',\n      component: App,\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","module.exports = \"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIzOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik0yMCA0aC0zLjE3TDE1IDJIOUw3LjE3IDRINGMtMS4xIDAtMiAuOS0yIDJ2MTJjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0tNSAxMS41VjEzSDl2Mi41TDUuNSAxMiA5IDguNVYxMWg2VjguNWwzLjUgMy41LTMuNSAzLjV6Ii8+Cjwvc3ZnPg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/camera.svg\n// module id = Zl/t\n// module chunks = 1","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjMmMzZTUwIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Ik0xNSA4aC4wMSIgLz4KICA8cGF0aCBkPSJNMTIuNSAyMWgtNi41YTMgMyAwIDAgMSAtMyAtM3YtMTJhMyAzIDAgMCAxIDMgLTNoMTJhMyAzIDAgMCAxIDMgM3Y2LjUiIC8+CiAgPHBhdGggZD0iTTMgMTZsNSAtNWMuOTI4IC0uODkzIDIuMDcyIC0uODkzIDMgMGwzLjUgMy41IiAvPgogIDxwYXRoIGQ9Ik0xNCAxNGwxIC0xYy42NzkgLS42NTMgMS40NzMgLS44MjkgMi4yMTQgLS41MjYiIC8+CiAgPHBhdGggZD0iTTE5IDIydi02IiAvPgogIDxwYXRoIGQ9Ik0yMiAxOWwtMyAtM2wtMyAzIiAvPgo8L3N2Zz4K\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/photoIcon.svg\n// module id = dYHa\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"main\",style:({ backgroundImage: 'url(./image/back.jpg)' })},[_c('div',{ref:\"container\",staticClass:\"container\"}),_vm._v(\" \"),_c('div',{staticClass:\"btnFrame\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onSavePng}},[_vm._v(\"Save PNG\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onSaveGif}},[_vm._v(\"Save GIF\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.onClose}},[_vm._v(\"TOP\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.url),expression:\"url\"}],ref:\"saveArea\",staticClass:\"saveArea\"},[_c('div',[(_vm.isSafari)?_c('div',{staticClass:\"safariText\"},[_vm._v(\"Press and hold to save image\")]):_vm._e(),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.url}})]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"closeBtn\",on:{\"click\":_vm.closeSaveArea}},[_vm._v(\"Close\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"social\"},[_c('a',{staticClass:\"twitter-share-button\",attrs:{\"href\":\"https://twitter.com/share\",\"data-dnt\":\"true\",\"data-size\":\"large\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-acb08494\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/threejs/Viewer.vue\n// module id = g3VV\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c0bf72e2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CheckImage.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CheckImage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CheckImage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c0bf72e2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CheckImage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c0bf72e2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CheckImage.vue\n// module id = ju6C\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6dc858cb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CameraApp.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CameraApp.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CameraApp.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6dc858cb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CameraApp.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6dc858cb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CameraApp.vue\n// module id = mriO\n// module chunks = 1","const osType = {\n  isIOS() { return /iphone|ipod|ipad/.test(navigator.userAgent.toLowerCase()); },\n  isAndroid() { return /android/.test(navigator.userAgent.toLowerCase()); },\n  isPC() { return !osType.isIOS() && !osType.isAndroid() && !/mobile/.test(navigator.userAgent.toLowerCase()); },\n};\n\nexport default osType;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/osType.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-33d00248\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Header.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Header.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Header.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-33d00248\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Header.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-33d00248\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Header.vue\n// module id = teIl\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-564d3d1f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Top.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Top.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Top.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-564d3d1f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Top.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-564d3d1f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Top.vue\n// module id = wxRh\n// module chunks = 1","<template>\n  <div>\n    <div class=\"main\" :style=\"{ backgroundImage: 'url(./image/back.jpg)' }\">\n      <div class=\"container\" ref=\"container\" />\n      <div class=\"btnFrame\">\n        <div class=\"btn\" @click=\"onStart\">\n          <img src=\"../assets/cameraIcon.svg\"/>\n          <div>Camera</div>\n        </div>\n        <div class=\"btn\">\n          <img src=\"../assets/photoIcon.svg\"/>\n          <div>Image</div>\n          <input type=\"file\" class=\"file\" accept=\"image/*\" @change=\"onSelectFile\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport loadImage from 'blueimp-load-image';\nimport ThreeCtrl from '@/threejs/ThreeCtrl';\n\nexport default {\n  props: ['onStart', 'onInput'],\n  data() {\n    return {\n      threeCtrl: null,\n    };\n  },\n  methods: {\n    onSelectFile(e) {\n      const file = e.target.files[0];\n      loadImage.parseMetaData(file, (data) => {\n        loadImage(\n          file,\n          (image) => {\n            const imageLength = Math.min(image.width, image.height);\n            const length = Math.min(500, imageLength);\n            const canvas = document.createElement('canvas');\n            canvas.width = length;\n            canvas.height = length;\n            const ctx = canvas.getContext('2d');\n            ctx.drawImage(\n              image,\n              (image.width - imageLength) / 2,\n              (image.height - imageLength) / 2,\n              imageLength,\n              imageLength,\n              0,\n              0,\n              length,\n              length,\n            );\n            this.onInput(ctx.getImageData(0, 0, length, length));\n          },\n          {\n            canvas: true,\n            cover: true,\n            aspectRatio: 1,\n            orientation: data.exif ? data.exif.get('Orientation') : 0,\n          },\n        );\n      });\n    },\n  },\n  mounted() {\n    const image = new Image();\n    image.src = './image/default.png';\n    image.onload = () => {\n      const canvas = document.createElement('canvas');\n      const length = image.width * 1.1;\n      canvas.width = length;\n      canvas.height = length;\n      const ctx = canvas.getContext('2d');\n      ctx.fillStyle = '#fff';\n      ctx.fillRect(0, 0, length, length);\n      ctx.drawImage(image, (length - image.width) / 2, (length - image.height) / 2);\n      this.threeCtrl = new ThreeCtrl(this.$refs.container, ctx.getImageData(0, 0, length, length));\n    };\n  },\n  destroyed() {\n    this.threeCtrl.destroy();\n  },\n};\n</script>\n\n<style scoped>\n.main {\n  background: center/cover no-repeat;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.container {\n  height: 100%;\n  width: 100%;\n}\n\n.btnFrame {\n  display: flex;\n  gap: 32px;\n  position: absolute;\n  left: 50%;\n  bottom: 80px;\n  transform: translateX(-50%);\n}\n\n.btn {\n  cursor: pointer;\n  transition: 0.25s;\n  font-size: 24px;\n  float: left;\n  width: 120px;\n  padding: 10px 0;\n  box-sizing: border-box;\n  position: relative;\n  background: #fff;\n  border-radius: 5px;\n  transition: 0.2s;\n}\n\n.btn:hover {\n  transform: scale(1.05);\n}\n\n.file {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  cursor: pointer;\n}\n\n@media screen and (max-width: 500px) {\n  .btnFrame {\n    bottom: 70px;\n  }\n\n  .btn {\n    font-size: 16px;\n    padding: 8px 0;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Top.vue"],"sourceRoot":""}